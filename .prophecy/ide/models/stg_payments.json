{"id":"stg_payments","metainfo":{"label":"stg_payments","finalProcessID":"renamed##B4M6iuEk","autoLayout":false,"staleState":"none","sourceSuggestions":{"sources":[{"source":{"table":{"name":"copilot","sourceName":"prophecy-development.dataset","sourceType":"ExternalSource"}},"sourceComponentKind":"ExternalSource","sourceLabel":"copilot","canJoinWith":[{"processLabel":"stg_customers","processId":"1JACl5OLeYVnNn_ne1RvH","properties":{"activeTab":"conditions","columnsSelector":["customer_id","first_name","last_name"],"conditions":[{"alias":"stg_customers","expression":{"expression":"stg_customers.customer_id = copilot.customer_id AND stg_customers.first_name = copilot.first_name AND stg_customers.last_name = copilot.last_name"},"joinType":"inner"}],"expressions":[{"expression":{"expression":"copilot.first_order"},"alias":"first_order"},{"expression":{"expression":"copilot.most_recent_order"},"alias":"most_recent_order"},{"expression":{"expression":"copilot.total_orders"},"alias":"total_orders"},{"expression":{"expression":"copilot.customer_lifetime_value"},"alias":"customer_lifetime_value"},{"expression":{"expression":"copilot.total_order_amount"},"alias":"total_order_amount"},{"expression":{"expression":"stg_customers.customer_id"},"alias":"customer_id"},{"expression":{"expression":"stg_customers.first_name"},"alias":"first_name"},{"expression":{"expression":"stg_customers.last_name"},"alias":"last_name"}],"headAlias":"copilot"},"isRecommended":true}]},{"source":{"table":{"name":"customers","sourceName":"prophecy-development.dataset","sourceType":"ExternalSource"}},"sourceComponentKind":"ExternalSource","sourceLabel":"customers","canJoinWith":[{"processLabel":"stg_customers","processId":"1JACl5OLeYVnNn_ne1RvH","properties":{"activeTab":"conditions","columnsSelector":["customer_id","first_name","last_name"],"conditions":[{"alias":"stg_customers","expression":{"expression":"stg_customers.customer_id = customers.customer_id AND stg_customers.first_name = customers.first_name AND stg_customers.last_name = customers.last_name"},"joinType":"inner"}],"expressions":[{"expression":{"expression":"customers.first_order"},"alias":"first_order"},{"expression":{"expression":"customers.most_recent_order"},"alias":"most_recent_order"},{"expression":{"expression":"customers.total_orders"},"alias":"total_orders"},{"expression":{"expression":"customers.customer_lifetime_value"},"alias":"customer_lifetime_value"},{"expression":{"expression":"stg_customers.customer_id"},"alias":"customer_id"},{"expression":{"expression":"stg_customers.first_name"},"alias":"first_name"},{"expression":{"expression":"stg_customers.last_name"},"alias":"last_name"}],"headAlias":"customers"},"isRecommended":true}]},{"source":{"table":{"name":"customers_orders_1","sourceName":"prophecy-development.dataset","sourceType":"ExternalSource"}},"sourceComponentKind":"ExternalSource","sourceLabel":"customers_orders_1","canJoinWith":[{"processLabel":"stg_customers","processId":"1JACl5OLeYVnNn_ne1RvH","properties":{"activeTab":"conditions","columnsSelector":["customer_id","first_name","last_name"],"conditions":[{"alias":"stg_customers","expression":{"expression":"stg_customers.customer_id = customers_orders_1.customer_id AND stg_customers.first_name = customers_orders_1.first_name AND stg_customers.last_name = customers_orders_1.last_name"},"joinType":"inner"}],"expressions":[{"expression":{"expression":"customers_orders_1.order_id"},"alias":"order_id"},{"expression":{"expression":"customers_orders_1.order_status"},"alias":"order_status"},{"expression":{"expression":"customers_orders_1.order_category"},"alias":"order_category"},{"expression":{"expression":"customers_orders_1.order_date"},"alias":"order_date"},{"expression":{"expression":"customers_orders_1.amount"},"alias":"amount"},{"expression":{"expression":"customers_orders_1.account_flags"},"alias":"account_flags"},{"expression":{"expression":"customers_orders_1.account_open_date"},"alias":"account_open_date"},{"expression":{"expression":"customers_orders_1.email"},"alias":"email"},{"expression":{"expression":"customers_orders_1.phone"},"alias":"phone"},{"expression":{"expression":"customers_orders_1.country_code"},"alias":"country_code"},{"expression":{"expression":"stg_customers.customer_id"},"alias":"customer_id"},{"expression":{"expression":"stg_customers.first_name"},"alias":"first_name"},{"expression":{"expression":"stg_customers.last_name"},"alias":"last_name"}],"headAlias":"customers_orders_1"},"isRecommended":true}]},{"source":{"table":{"name":"orders","sourceName":"prophecy-development.dataset","sourceType":"ExternalSource"}},"sourceComponentKind":"ExternalSource","sourceLabel":"orders","canJoinWith":[{"processLabel":"stg_customers","processId":"1JACl5OLeYVnNn_ne1RvH","properties":{"activeTab":"conditions","columnsSelector":["customer_id"],"conditions":[{"alias":"stg_customers","expression":{"expression":"stg_customers.customer_id = orders.customer_id"},"joinType":"inner"}],"expressions":[{"expression":{"expression":"orders.order_id"},"alias":"order_id"},{"expression":{"expression":"orders.order_date"},"alias":"order_date"},{"expression":{"expression":"orders.status"},"alias":"status"},{"expression":{"expression":"orders.credit_card_amount"},"alias":"credit_card_amount"},{"expression":{"expression":"orders.coupon_amount"},"alias":"coupon_amount"},{"expression":{"expression":"orders.bank_transfer_amount"},"alias":"bank_transfer_amount"},{"expression":{"expression":"orders.gift_card_amount"},"alias":"gift_card_amount"},{"expression":{"expression":"orders.amount"},"alias":"amount"},{"expression":{"expression":"stg_customers.customer_id"},"alias":"customer_id"},{"expression":{"expression":"stg_customers.first_name"},"alias":"first_name"},{"expression":{"expression":"stg_customers.last_name"},"alias":"last_name"}],"headAlias":"orders"},"isRecommended":true}]},{"source":{"table":{"name":"raw_customers","sourceName":"prophecy-development.dataset","sourceType":"ExternalSource"}},"sourceComponentKind":"ExternalSource","sourceLabel":"raw_customers","canJoinWith":[{"processLabel":"stg_customers","processId":"1JACl5OLeYVnNn_ne1RvH","properties":{"activeTab":"conditions","columnsSelector":["first_name","last_name"],"conditions":[{"alias":"stg_customers","expression":{"expression":"stg_customers.first_name = raw_customers.first_name AND stg_customers.last_name = raw_customers.last_name"},"joinType":"inner"}],"expressions":[{"expression":{"expression":"raw_customers.id"},"alias":"id"},{"expression":{"expression":"stg_customers.customer_id"},"alias":"customer_id"},{"expression":{"expression":"stg_customers.first_name"},"alias":"first_name"},{"expression":{"expression":"stg_customers.last_name"},"alias":"last_name"}],"headAlias":"raw_customers"},"isRecommended":true}]},{"source":{"table":{"name":"stg_orders","sourceName":"prophecy-development.dataset","sourceType":"ExternalSource"}},"sourceComponentKind":"ExternalSource","sourceLabel":"stg_orders","canJoinWith":[{"processLabel":"stg_customers","processId":"1JACl5OLeYVnNn_ne1RvH","properties":{"activeTab":"conditions","columnsSelector":["customer_id"],"conditions":[{"alias":"stg_customers","expression":{"expression":"stg_customers.customer_id = stg_orders.customer_id"},"joinType":"inner"}],"expressions":[{"expression":{"expression":"stg_orders.order_id"},"alias":"order_id"},{"expression":{"expression":"stg_orders.order_date"},"alias":"order_date"},{"expression":{"expression":"stg_orders.status"},"alias":"status"},{"expression":{"expression":"stg_customers.customer_id"},"alias":"customer_id"},{"expression":{"expression":"stg_customers.first_name"},"alias":"first_name"},{"expression":{"expression":"stg_customers.last_name"},"alias":"last_name"}],"headAlias":"stg_orders"},"isRecommended":true}]},{"source":{"table":{"name":"customers","sourceType":"Model"}},"sourceComponentKind":"Model","sourceLabel":"customers","canJoinWith":[{"processLabel":"stg_customers","processId":"1JACl5OLeYVnNn_ne1RvH","properties":{"activeTab":"conditions","columnsSelector":["customer_id","first_name","last_name"],"conditions":[{"alias":"stg_customers","expression":{"expression":"stg_customers.customer_id = customers.customer_id AND stg_customers.first_name = customers.first_name AND stg_customers.last_name = customers.last_name"},"joinType":"inner"}],"expressions":[{"expression":{"expression":"customers.first_order"},"alias":"first_order"},{"expression":{"expression":"customers.most_recent_order"},"alias":"most_recent_order"},{"expression":{"expression":"customers.total_orders"},"alias":"total_orders"},{"expression":{"expression":"customers.customer_lifetime_value"},"alias":"customer_lifetime_value"},{"expression":{"expression":"stg_customers.customer_id"},"alias":"customer_id"},{"expression":{"expression":"stg_customers.first_name"},"alias":"first_name"},{"expression":{"expression":"stg_customers.last_name"},"alias":"last_name"}],"headAlias":"customers"},"isRecommended":false}]},{"source":{"table":{"name":"orders","sourceType":"Model"}},"sourceComponentKind":"Model","sourceLabel":"orders","canJoinWith":[{"processLabel":"stg_customers","processId":"1JACl5OLeYVnNn_ne1RvH","properties":{"activeTab":"conditions","columnsSelector":["customer_id"],"conditions":[{"alias":"stg_customers","expression":{"expression":"stg_customers.customer_id = orders.customer_id"},"joinType":"inner"}],"expressions":[{"expression":{"expression":"orders.order_id"},"alias":"order_id"},{"expression":{"expression":"orders.order_date"},"alias":"order_date"},{"expression":{"expression":"orders.status"},"alias":"status"},{"expression":{"expression":"orders.credit_card_amount"},"alias":"credit_card_amount"},{"expression":{"expression":"orders.coupon_amount"},"alias":"coupon_amount"},{"expression":{"expression":"orders.bank_transfer_amount"},"alias":"bank_transfer_amount"},{"expression":{"expression":"orders.gift_card_amount"},"alias":"gift_card_amount"},{"expression":{"expression":"orders.amount"},"alias":"amount"},{"expression":{"expression":"stg_customers.customer_id"},"alias":"customer_id"},{"expression":{"expression":"stg_customers.first_name"},"alias":"first_name"},{"expression":{"expression":"stg_customers.last_name"},"alias":"last_name"}],"headAlias":"orders"},"isRecommended":false}]},{"source":{"table":{"name":"raw_customers","sourceType":"Seed"}},"sourceComponentKind":"Seed","sourceLabel":"raw_customers","canJoinWith":[{"processLabel":"stg_customers","processId":"1JACl5OLeYVnNn_ne1RvH","properties":{"activeTab":"conditions","columnsSelector":["first_name","last_name"],"conditions":[{"alias":"stg_customers","expression":{"expression":"stg_customers.first_name = raw_customers.first_name AND stg_customers.last_name = raw_customers.last_name"},"joinType":"inner"}],"expressions":[{"expression":{"expression":"raw_customers.id"},"alias":"id"},{"expression":{"expression":"stg_customers.customer_id"},"alias":"customer_id"},{"expression":{"expression":"stg_customers.first_name"},"alias":"first_name"},{"expression":{"expression":"stg_customers.last_name"},"alias":"last_name"}],"headAlias":"raw_customers"},"isRecommended":false}]},{"source":{"table":{"name":"stg_customers","sourceType":"Model"}},"sourceComponentKind":"Model","sourceLabel":"stg_customers_1","canJoinWith":[{"processLabel":"stg_customers","processId":"1JACl5OLeYVnNn_ne1RvH","properties":{"activeTab":"conditions","columnsSelector":["customer_id","first_name","last_name"],"conditions":[{"alias":"stg_customers","expression":{"expression":"stg_customers.customer_id = stg_customers_1.customer_id AND stg_customers.first_name = stg_customers_1.first_name AND stg_customers.last_name = stg_customers_1.last_name"},"joinType":"inner"}],"expressions":[{"expression":{"expression":"stg_customers.customer_id"},"alias":"customer_id"},{"expression":{"expression":"stg_customers.first_name"},"alias":"first_name"},{"expression":{"expression":"stg_customers.last_name"},"alias":"last_name"}],"headAlias":"stg_customers_1"},"isRecommended":false}]},{"source":{"table":{"name":"stg_orders","sourceType":"Model"}},"sourceComponentKind":"Model","sourceLabel":"stg_orders","canJoinWith":[{"processLabel":"stg_customers","processId":"1JACl5OLeYVnNn_ne1RvH","properties":{"activeTab":"conditions","columnsSelector":["customer_id"],"conditions":[{"alias":"stg_customers","expression":{"expression":"stg_customers.customer_id = stg_orders.customer_id"},"joinType":"inner"}],"expressions":[{"expression":{"expression":"stg_orders.order_id"},"alias":"order_id"},{"expression":{"expression":"stg_orders.order_date"},"alias":"order_date"},{"expression":{"expression":"stg_orders.status"},"alias":"status"},{"expression":{"expression":"stg_customers.customer_id"},"alias":"customer_id"},{"expression":{"expression":"stg_customers.first_name"},"alias":"first_name"},{"expression":{"expression":"stg_customers.last_name"},"alias":"last_name"}],"headAlias":"stg_orders"},"isRecommended":false}]}]},"graphConfig":{"userDefinedConfig":{"vars":{}}}},"processes":{"source##KocqUmjn":{"id":"source##KocqUmjn","component":"Seed","metadata":{"label":"source","x":120,"y":120,"phase":0,"comment":"-\n  Normally we would select from the table here, but we are using seeds to load\n  our data in this project\n  "},"properties":{"table":{"name":"raw_payments","sourceType":"Model"}},"ports":{"inputs":[],"outputs":[{"id":"AnG2NTzq","schema":{"providerType":"BigQuery","fields":[{"name":"id","dataType":{"type":"Integer"}},{"name":"order_id","dataType":{"type":"Integer"}},{"name":"payment_method","dataType":{"type":"String"}},{"name":"amount","dataType":{"type":"Integer"}}]},"slug":"out"}],"isCustomOutputSchema":false}},"renamed##B4M6iuEk":{"id":"renamed##B4M6iuEk","component":"Reformat","metadata":{"label":"renamed","x":320,"y":120,"phase":0},"properties":{"columnsSelector":[],"expressions":[{"expression":{"expression":"id"},"alias":"payment_id"},{"expression":{"expression":"order_id"}},{"expression":{"expression":"payment_method"}},{"expression":{"expression":"-- `amount` is currently stored in cents, so we convert it to dollars\namount / 100"},"alias":"amount"}]},"ports":{"inputs":[{"id":"EyvIrewL","schema":{"providerType":"BigQuery","fields":[{"name":"id","dataType":{"type":"Integer"}},{"name":"order_id","dataType":{"type":"Integer"}},{"name":"payment_method","dataType":{"type":"String"}},{"name":"amount","dataType":{"type":"Integer"}}]},"slug":"source"}],"outputs":[{"id":"juSPJQMP","schema":{"providerType":"BigQuery","fields":[{"name":"payment_id","dataType":{"type":"Integer"}},{"name":"order_id","dataType":{"type":"Integer"}},{"name":"payment_method","dataType":{"type":"String"}},{"name":"amount","dataType":{"type":"Float"}}]},"slug":"out"}],"isCustomOutputSchema":false}}},"connections":[{"id":"fAxxNoGd","source":"source##KocqUmjn","sourcePort":"AnG2NTzq","target":"renamed##B4M6iuEk","targetPort":"EyvIrewL"}],"component":"Model"}